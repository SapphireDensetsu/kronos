.TAILER .
.HEADER .



                - Сибирское отделение  АН СССР -




                    - Вычислительный центр -




                        - ВНТК "Старт" -








:::::      ::::
:::::      ::::
 :::      :::
 :::     ::
 :::    ::
 ::: : :         ::::::       ::::     :::   :::     :::       :::::
 :::    ::       ::    ::   :::  :::   :::   :::   ::: :::    :::  :::
 :::     :::     ::     :: ::      ::   ::   ::   ::     ::  ::
 :::      :::    ::     :: ::      ::   :::::::   ::     ::  ::
:::::      ::::  :::  :::   :::  :::   :::   :::   ::: :::    :::  :::
:::::      ::::  ::::::       ::::     :::   :::     :::       :::::
                 ::
                 ::
                 ::  УТИЛИТЫ  ОС  EXCELSIOR











                         Новосибирск - 88

.PAGE
.TAILER .     <date          >           <#        >                   (c) KRONOS
.HEADER .

























                         Мы    надеемся,    что    информация,
                    изложенная  в  этом томе, является верной.
                    Будем    признательны,    если    читатель
                    критически  подойдет к ней и все возникшие
                    вопросы,    замечания,    исправления    и
                    пожелания   доведет  до  нашего  сведения.
                    Выражаем благодарность всем, кто прямо или
                    косвенно  принимал  участие в подготовке и
                    издании тома.



                    Наш адрес:

                         630090,   Новосибирск-90,    проспект
                    ак. Лаврентьева, 6,  ВЦ СОАН СССР,  к.503,
                    тел. 35-50-67.
                         Для сотрудников ВЦ СOАН тел. 8-97.
.PAGE
                           СОДЕРЖАНИЕ


Введение . . . . . . . . . . . . . . . . . . . . . . . . . . 5
Функции утилит . . . . . . . . . . . . . . . . . . . . . . . 6
Порядок запуска . . . . . . . . . . . . . . . . . . . . . . .8
О стандарте версий . . . . . . . . . . . . . . . . . . . . . 9

Утилиты работы с файлами
  cat . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
  cp . . . . . . . . . . . . . . . . . . . . . . . . . . .  16
  cpt . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
  diff . . . . . . . . . . . . . . . . . . . . . . . . . . .21
  grep . . . . . . . . . . . . . . . . . . . . . . . . . . .40
  ln . . . . . . . . . . . . . . . . . . . . . . . . . . . .47
  ls . . . . . . . . . . . . . . . . . . . . . . . . . . . .49
  mkdir . . . . . . . . . . . . . . . . . . . . . . . . . . 55
  mv . . . . . . . . . . . . . . . . . . . . . . . . . . . .58
  rm . . . . . . . . . . . . . . . . . . . . . . . . . . . .60
  size . . . . . . . . . . . . . . . . . . . . . . . . . . .64
  squ . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
  where . . . . . . . . . . . . . . . . . . . . . . . . . . 73
Компиляторы
  m2 . . . . . . . . . . . . . . . . . . . . . . . . . . . .50
Редакторы
  e2 . . . . . . . . . . . . . . . . . . . . . . . . . . . .24
  ex . . . . . . . . . . . . . . . . . . . . . . . . . . . .28
Утилиты визуализации Модула-программ
  hy . . . . . . . . . . . . . . . . . . . . . . . . . . . .42
  ms . . . . . . . . . . . . . . . . . . . . . . . . . . . .57
  v2 . . . . . . . . . . . . . . . . . . . . . . . . . . . .71
Утилиты сервиса
  ascii . . . . . . . . . . . . . . . . . . . . . . . . . . 12
  dt . . . . . . . . . . . . . . . . . . . . . . . . . . . .22
  echo . . . . . . . . . . . . . . . . . . . . . . . . . . .25
  help . . . . . . . . . . . . . . . . . . . . . . . . . . .41
  mail . . . . . . . . . . . . . . . . . . . . . . . . . . .52
  pr . . . . . . . . . . . . . . . . . . . . . . . . . . . .59
Утилиты работы с другими файловыми системами
  cpmflx . . . . . . . . . . . . . . . . . . . . . . . . . .17
  flx . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
Утилиты конфигурирования системы
  abs . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
  boo . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
  cash . . . . . . . . . . . . . . . . . . . . . . . . . . .14
  ins . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
  load . . . . . . . . . . . . . . . . . . . . . . . . . . .48
  mkboard . . . . . . . . . . . . . . . . . . . . . . . . . 53
  mkboot . . . . . . . . . . . . . . . . . . . . . . . . . .54
  run . . . . . . . . . . . . . . . . . . . . . . . . . . . 61
  sp . . . . . . . . . . . . . . . . . . . . . . . . . . . .65
  stty . . . . . . . . . . . . . . . . . . . . . . . . . . .67
  up . . . . . . . . . . . . . . . . . . . . . . . . . . . .69
Утилиты редактирования носителя
  cre . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
  dead . . . . . . . . . . . . . . . . . . . . . . . . . . .20
  edi . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
  sc . . . . . . . . . . . . . . . . . . . . . . . . . . . .62
Утилиты работы с устройствами
  du . . . . . . . . . . . . . . . . . . . . . . . . . . . .23
  errlog . . . . . . . . . . . . . . . . . . . . . . . . . .27
  iv . . . . . . . . . . . . . . . . . . . . . . . . . . . .44
  mou . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
  try . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
  volc . . . . . . . . . . . . . . . . . . . . . . . . . . .72
Утилиты работы с терминалом Labtam 3000
  labex . . . . . . . . . . . . . . . . . . . . . . . . . . 45
  labtam . . . . . . . . . . . . . . . . . . . . . . . . . .46
.PAGE
.HEADER .          УТИЛИТЫ ОС Excelsior                             ВВОДНАЯ ЧАСТЬ

                            ВВЕДЕНИЕ

     Пользовательский   интерфейс   в   системе   осуществляют
системные утилиты.
     Утилиты  системы  представляют  собой  несколько  наборов
программных  модулей,  импортирующих  модули  ядра  и файловой
системы и оформленных в соответствии со стандартом, принятым в
ОС  Excelsior. О стандарте будет сказано дополнительно. Каждый
из наборов предназначается для выполнения определенных функций
-    работы    с   файлами,   с   устройствами,   визуализации
Модула-программ и т.д..
     Данный  том  является  справочным пособием по утилитам ОС
Excelsior. Основная часть тома посвящается подробному описанию
утилит. В этой части изложение ведется в следующей форме:
     - способы запуска;
     - этимология названия;
     - описание действия;
     - возможные ключи;
     - примеры использования.
     В описании некоторых утилит возможны и другие разделы.
.PAGE

                         ФУНКЦИИ УТИЛИТ

     Утилиты  ОС  Excelsior можно условно разбить на разделы в
соответствии  с областью их применения. Заметим, что некоторые
утилиты  (они  приведены ниже в разделах 7,8,9,10) не являются
общепользовательскими  (кроме, быть может, помеченных в списке
знаком  '*'),  поскольку либо требуют специальной подготовки и
налагают   большую   ответственность   на   использующего   их
программиста,  либо  обслуживают  деятельность  администратора
системы и не нужны программисту.
     Приводим списки разделов утилит с указанием их назначения.

     1. Утилиты работы с файлами:

     1) cat - объединяет все перечисленные файлы в один;
     2) cp - осуществляет физическое копирование файла;
     3) cpt - копирует файловое дерево;
     4) diff - осуществляет посимвольное сравнение двух файлов;
     5) grep - ищет образец текста в указанных файлах;
     6) ln - привязывает файл к еще одному имени;
     7) ls - выдает имена файлов на директории;
     8) mkdir - создает новую директорию;
     9) mv - заменяет имя файла на новое;
     10) rm - удаляет указанные файлы;
     11) size - подсчитывает размер файлов и поддеревьев;
     12) squ  - осуществляет упаковку-распаковку файлов;
     13) where - ищет файл на указанных директориях.

     2. Компиляторы:

     1) m2 - Модула-2 -компилятор.

     3. Редакторы:

     1) ex - универсальный редактор текстов;
     2) e2 - компилирующий редактор.

     4. Утилиты визуализации Модула-программ:

     1) hy - выдает историю последнего неудавшегося процесса;
     2) ms - выдает суммарную информацию об указанных модулях;
     3) v2 - выдает информацию о кодофайле программы.


     5. Утилиты сервиса:

     1) ascii - выдает по нажатии клавиши ее кодировку;
     2) dt - показывает и редактирует время в системе;
     3) echo  -  отрабатывает   указанную   последовательность
символов;
     4) help - осуществляет подсказку в системе;
     5) mail - посылает сообщение на указанные терминалы;
     6) pr - выводит файл на печатающее устройство.


     6. Утилиты работы с другими файловыми системами:

     1) cpmflx  -  переносит  файлы из CPM/86 в ОС Excelsior и
обратно;
     2) flx - осуществляет работу с файловой системой RT-11.

     Внимание!   Утилиты   следующих   разделов   НЕ  ЯВЛЯЮТСЯ
общепользовательскими!

     7. Утилиты конфигурирования системы:

      1) abs - осуществляет статическое связывание задачи;
      2) boo - загружает в оперативную память образ задачи;
      3) cash - работает с дисковым кэшем;
      4) ins - устанавливает драйвер устройства;
      5) load - загружает в оперативную память программу;
      6) mkboard  -  устанавливает соответствие функциональных
ключей и клавиш терминала;
      7) mkboot - создает загрузочные (системные) носители;
      8) run - запускает задачу без ожидания ее завершения;
      9) sp - изменяет парметры системы и показывает их;
     10) stty  -  устанавливает  тип  терминала, программирует
клавиатуру;
     11) up  -  предназначается   для   настройки  системы  на
конкретное  оборудование  во  время  инициализации  системы, а
также загрузки и запуска различных утилит и командных файлов.

     8. Утилиты редактирования носителя:

     1) cre  - создает  файл  на текущей директории с указанным
именем, указанной длины и с содержимым из указанных блоков;
     2) dead - осуществляет редактирование и проверку носителя;
     3) edi - редактирует таблицу файлов на блочном устройстве;
     4) sc - ищет указанные блоки на текущем носителе.

     9. Утилиты работы с устройствами:

(*)  1) du - выдает информацию о свободных блоках на носителе;
     2) errlog   -   выдает   статистику   ошибок  для  группы
устройств;
     3) iv - инициализирует и проверяет носители;
(*)  4) mou  -  монтирует  носитель   на  блочном  устройстве,
ассоциирует носитель с логическим устройством;
     5) try   -   устанавливает   число   попыток  при  ошибке
устройства;
     6) volc - копирует носители 'один в один'.

     10. Утилиты работы с терминалом Labtam 3000:

     1) labex - редактирует алфавит для терминала Labtam 3000;
     2) labtam - инициализирует терминал Labtam 3000.

.PAGE
                       ПОРЯДОК ЗАПУСКА

     Запуск  задач (в том числе утилит) в системе обеспечивает
пользовательская оболочка системы sh.
     Запуск   утилиты   sh  (shell  -  оболочка)  производится
администратором системы при загрузке системы. Как правило, это
делается    с    помощью   командного   файла,   определяющего
конфигурацию системы. После запуска sh на терминал доступны ее
команды  path,  cd,  set,  us,  mem,  quit,  bye,  hi, news. О
командах  и возможностях, предоставляемых sh, рассказывается в
томе "КРОНОС для начинающих".
     О   порядке   запуска   каждой   утилиты   можно  узнать,
воспользовавшись  монитором-подсказкой  help.  В  ней подробно
описано  назначение  и  возможности  каждой  утилиты,  а также
приведены примеры их использования.
     Все утилиты ОС Excelsior имеют стандартный интерфейс. Вот
как выглядит вызов утилиты:

вызов утилиты::
     имя_утилиты { параметр | числовой_ключ | ключи }

параметр::
     строка

числовой_ключ::
     символ=число

ключи::
     -{ символ }

число::
     число_в_стандарте_Модулы-2

     Примеры:
     ls *.doc -cw
Имя утилиты 'ls', параметр '*.doc', ключи 'c' и 'w'.

     mkboot  ExcII  a=1
     Имя утилиты 'mkboot', параметр 'ExcII', числовой ключ 'a'
равен 1.

     Порядок  появления  ключей  и  числовых  ключей  не имеет
значения. Так, все эти вызовы одинаковы:

     ls *.doc -cw
     ls -c *.doc -w
     ls -cw *.doc

     Ключи   (но   не  числовые  ключи),  которые  утилита  не
использует,  игнорируются. Внутри утилиты работа с параметрами
ведется с помощью библиотеки Args.
     Два  ключа  являются  стандартным  -  'h' и '#'. Ключ 'h'
означает  выдачу  подсказки на стандартный вывод, а ключ '#' -
выдачу  версии  утилиты (см. далее). Больше никаких действий в
случае  появления  этих  ключей  утилита  не должна выполнять.
Кроме  этого,  некоторые  утилиты  выдают  подсказку  в случае
вызова   их   без   параметров   или  с  некорректным  набором
параметров.

                       О  СТАНДАРТЕ ВЕРСИЙ

     Для  всех утилит работает ключ '#', который выдает версию
утилиты на стандартный вывод в формате:

версия::
     имя_утилиты номер_версии  [версия_ОС]  время_модификации

номер_версии::
     v[реализация '.'] номер_интерфейса '.' номер_модификации
     [уточнение]

версия_ОС::
     название_ОС номер_версии_ОС

     Версия   содержит   имя   утилиты,  номер  версии,  время
последней  модификации  и,  возможно,  версию  ОС,  начиная  с
которой   эта   утилита  работает.  Номер  версии  обязательно
включает  в  себя номер модификации, который увеличивается при
любом   изменении   утилиты,   и   номер  интерфейса,  который
увеличивается,  если  это  изменение  влияет  на использование
утилиты  (например,  добавление ключей). Кроме этого, в номере
версии  может быть номер реализации, который увеличивается при
существенном   изменении   семантики   утилиты.   Если   номер
реализации  отсутствует,  то  это  нулевая реализации утилиты.
Версия  может  содержать уточнение. Уточнение - это какая-либо
информация, которая помогает понять сделанное изменение.
     С  точки зрения пользователя изменение номера модификации
несущественно;   при   изменении   номера   интерфейса   нужно
посмотреть  подсказку утилиты (ключ 'h'); при изменении номера
реализации нужно прочитать документацию по этой утилите.

     Примеры версий:

1) mkboot -#
   mkboot  v0.0 /15-Mar-86/ (c) KRONOS

Нулевые номера версий, интерфейса и реализации.

   mkboot  v1.2 /15-Mar-88/ (c) KRONOS

Были выполнены две правки и внесены изменения в интерфейс.
Вызовите
   mkboot -h

2) m2 -#
   Modula 2.5  v1.9o  /15-Mar-88/ (c) KRONOS

Уточнение 'o' - версия с оптимизацией переходов.

3) backup -#

    backup  v0.0  ExcII v0.5 /15-Mar-88/ (c) KRONOS

Утилита работает в ОС Excelsior II в версиях старше 0.5.

    Далее переходим к описательной части тома.
.PAGE
