  PROCEDURE compress(): BOOLEAN;    VAR d: INTEGER;  BEGIN    go(x,y);    LOOP      IF (sx=0) OR (sy=0) THEN RETURN TRUE END;      IF wsp^.dt=dt THEN        IF (wsp^.x<=x) & (wsp^.rt^.x>=x+sx) THEN          d:=wsp^.up^.y-y;          IF d>=sy THEN d:=sy END;          DEC(sy,d); INC(y,d);          wsp:=wsp^.up;          WHILE wsp^.x>x DO wsp:=wsp^.lf END;        ELSIF (wsp^.y<=y) & (wsp^.up^.y>=y+sy) THEN          d:=wsp^.rt^.x-x;          IF d>=sx THEN d:=sx END;          DEC(sx,d); INC(x,d);          wsp:=wsp^.rt;          WHILE wsp^.y>y DO wsp:=wsp^.dw END;        ELSE EXIT        END;      ELSE EXIT      END;    END;    RETURN FALSE;  END compress;